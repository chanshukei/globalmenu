<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/common.css">
    <title>Login</title>
</head>
<body class="container">
    <script src="./js/jquery-3.5.1.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/js.cookie.min.js"></script>
    <script src="./js/common.js"></script>
    <script
        async
        src="https://pay.google.com/gp/p/js/pay.js"
        onload="console.log('TODO: add google pay api onload function')">
    </script>
    <script>
        const tokenizationSpecification = {
    type: 'PAYMENT_GATEWAY',
    parameters: {
      'gateway': 'payu',
      'gatewayMerchantId': '1SStDf07'
    }
  };

const allowedCardNetworks = ['MASTERCARD', 'VISA'];
const allowedCardAuthMethods = ['PAN_ONLY', 'CRYPTOGRAM_3DS'];

const baseCardPaymentMethod = {
    type: 'CARD',
    parameters: {
        allowedAuthMethods: allowedCardAuthMethods,
        allowedCardNetworks: allowedCardNetworks
    }
};

const cardPaymentMethod = Object.assign(
    {tokenizationSpecification: tokenizationSpecification},
    baseCardPaymentMethod
);

const paymentsClient = new google.payments.api.PaymentsClient({environment: 'TEST'});

const isReadyToPayRequest = Object.assign({}, baseRequest);
isReadyToPayRequest.allowedPaymentMethods = [baseCardPaymentMethod];

paymentsClient.isReadyToPay(isReadyToPayRequest)
.then(
    function(response) {
        if (response.result) {
            // add a Google Pay payment button\
            console.log('ready to add google pay button');
        }
    }
)
.catch(
    function(err) {
        // show error in developer console for debugging
        console.error(err);
    }
);
    </script>

    <div id='shops' style="max-width: 400px; width: 98%; padding: 10px; display:inline-block;">
        Test google pay
        <div id="googlePayButton"></div>
    </div>

</body>
</html>
